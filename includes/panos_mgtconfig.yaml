---
- name: "system: Ensure state of system"
  environment:
    PYTHONHTTPSVERIFY: 0
  panos_mgtconfig:
    ip_address: "{{ provider.host }}"
    username: "{{ provider.username }}"
    password: "{{ provider.password }}"
    hostname: "{{ panos_mgtconfig.hostname | default(omit, true) }}"
    domain: "{{ panos_mgtconfig.domain | default(omit, true) }}"
    login_banner: "{{ panos_mgtconfig.login_banner | default(omit, true) }}"
    update_server: "{{ panos_mgtconfig.update_server | default(omit, true) }}"
    devicegroup: "{{ panos_mgtconfig.devicegroup | default(omit, true) }}"
    dns_server_primary: "{{ panos_mgtconfig.dns_servers | default([]) | first or default(omit, true) }}"
    dns_server_secondary: "{{ panos_mgtconfig.dns_servers | default([]) | last or default(omit, true) }}"
    panorama_primary: "{{ panos_mgtconfig.panoramas | default([]) | first or default(omit, true) }}"
    panorama_secondary: "{{ panos_mgtconfig.panoramas | default([]) | last or default(omit, true) }}"
    ntp_server_primary: "{{ panos_mgtconfig.ntp_servers | default([]) | first or default(omit, true) }}"
    ntp_server_secondary: "{{ panos_mgtconfig.ntp_servers | default([]) | last or default(omit, true) }}"
    commit: false
